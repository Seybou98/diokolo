(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{10530:function(e,s,i){Promise.resolve().then(i.bind(i,45101))},45101:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return _}});var r=i(57437),t=i(59772),a=i(12753),l=i(63680),n=i(2235),d=i(20610),o=i(99240),u=i(74340),m=i(14937),c=i(10114),f=i(410),g=i(5284),h=i(25524),p=i(4566);let x=t.z.object({firstName:n.Q_.refine(e=>e.trim().length>0,{message:"Le pr\xe9nom est requis"}),lastName:n.Q_.refine(e=>e.trim().length>0,{message:"Le nom est requis"}),address:n.Q_.refine(e=>e.trim().length>0,{message:"L'adresse est requise"}),address2:t.z.string().optional(),zipCode:n.Q_.refine(e=>e.trim().length>0,{message:"Le code postal est requis"}),city:n.Q_.refine(e=>e.trim().length>0,{message:"La ville est requise"}),email:n.Q5.refine(e=>e.includes("@"),{message:"L'e-mail doit \xeatre valide"})});function b(e){var s,i,t,n;let{user:b}=e,v=(0,d.p)(),{mutate:j,isPending:N}=(0,h.useMutation)({mutationFn:e=>(0,p.Nq)(e),onSuccess:()=>{v({title:"Informations modifi\xe9es avec succ\xe8s",status:"success",position:"top"})},onError:()=>{v({title:"Erreur lors de la mise \xe0 jour",status:"error",position:"top"})}}),C=(0,l.w5)({schema:x,defaultValues:{address:(null===(s=b.address)||void 0===s?void 0:s.address)||"",address2:(null===(i=b.address)||void 0===i?void 0:i.address2)||"",city:(null===(t=b.address)||void 0===t?void 0:t.city)||"",zipCode:(null===(n=b.address)||void 0===n?void 0:n.zipCode)||"",email:b.email||"",firstName:b.firstName||"",lastName:b.lastName||""}});return(0,r.jsx)(o.k,{h:"100vh",flexDir:{base:"column",md:"row"},children:(0,r.jsx)(u.xu,{flex:1,overflowY:"auto",p:{base:4,md:6},children:(0,r.jsx)(a.default,{title:"Mes informations",children:(0,r.jsxs)(l.l0,{form:C,onSubmit:e=>{j({email:e.email,firstName:e.firstName,lastName:e.lastName,address:{address:e.address,address2:e.address2,city:e.city,zipCode:e.zipCode}})},children:[(0,r.jsxs)(m.g,{align:"stretch",spacing:5,children:[(0,r.jsxs)(c.K,{flexDir:{base:"column",lg:"row"},spacing:5,children:[(0,r.jsx)(f.I,{label:"Nom *",...C.register("lastName"),isDisabled:N}),(0,r.jsx)(f.I,{label:"Pr\xe9nom *",...C.register("firstName"),isDisabled:N})]}),(0,r.jsx)(f.I,{label:"Adresse *",...C.register("address"),isDisabled:N}),(0,r.jsx)(f.I,{label:"Compl\xe9ment d'adresse",...C.register("address2"),isDisabled:N}),(0,r.jsxs)(c.K,{flexDir:{base:"column",lg:"row"},spacing:5,children:[(0,r.jsx)(f.I,{label:"Code Postal *",...C.register("zipCode"),isDisabled:N}),(0,r.jsx)(f.I,{label:"Ville *",...C.register("city"),isDisabled:N})]}),(0,r.jsx)(f.I,{label:"Email *",type:"email",...C.register("email"),isDisabled:N})]}),(0,r.jsx)(g.M,{maxW:"400px",w:"full",mt:10,isLoading:N,children:"METTRE \xc0 JOUR"})]})})})})}var v=i(67016),j=i(17564),N=i(2265),C=i(16463);function _(){let{data:e,isLoading:s}=(0,p.Pi)(),i=(0,C.useRouter)(),[t,a]=(0,N.useState)(!1);return((0,N.useEffect)(()=>{let e=j.I.onAuthStateChanged(e=>{e?a(!0):a(!1)});return()=>e()},[]),(0,N.useEffect)(()=>{!t||s||e||(console.log("Page: Aucun utilisateur trouv\xe9, redirection vers connexion"),i.replace("/app/connexion"))},[e,s,i,t]),!t||s)?(0,r.jsx)(v.Z,{h:"100vh",children:"Chargement du compte..."}):e?(0,r.jsx)(b,{user:e}):(0,r.jsx)(v.Z,{h:"100vh",children:"V\xe9rification de l'authentification..."})}}},function(e){e.O(0,[351,335,744],function(){return e(e.s=10530)}),_N_E=e.O()}]);