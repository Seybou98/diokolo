(()=>{var e={};e.id=3578,e.ids=[3578],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},1384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(68779),r(60108),r(12523);var n=r(23191),s=r(88716),i=r(37922),o=r.n(i),l=r(95231),a={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);r.d(t,a);let c=["",{children:["services",{children:["contrat-entretien",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,68779)),"C:\\Users\\Reunion2\\Desktop\\test-pay\\front\\src\\app\\services\\contrat-entretien\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,60108)),"C:\\Users\\Reunion2\\Desktop\\test-pay\\front\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\Reunion2\\Desktop\\test-pay\\front\\src\\app\\not-found.tsx"]}],d=["C:\\Users\\Reunion2\\Desktop\\test-pay\\front\\src\\app\\services\\contrat-entretien\\page.tsx"],u="/services/contrat-entretien/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/services/contrat-entretien/page",pathname:"/services/contrat-entretien",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},49157:(e,t,r)=>{Promise.resolve().then(r.bind(r,58028))},58028:(e,t,r)=>{"use strict";r.d(t,{default:()=>ex});var n=r(10326),s=r(11938),i=r(25408),o=r(88945),l=r(27790),a=r(18434),c=r(74723);let d=["Logement","\xc9quipement","Coordonn\xe9es","Adresse","Rendez-vous","Contrat","Paiement"];function u(e){let{step:t,type:r,onChangeStep:i}=e,u=((0,c.Gc)().watch("payment-type")??"month")=="month"?"mensuelle":"annuelle";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.xu,{bg:"gray.200",w:"full",p:{base:5,lg:10},overflowX:"auto",children:[n.jsx(o.E,{justify:"center",children:d.map((e,r)=>n.jsx(o.U,{minW:"120px",w:{lg:`calc(${100/d.length}% - 10px)`},children:(0,n.jsxs)(l.x,{color:"gray.400",fontWeight:600,textAlign:"center",w:"full",...r==t&&{color:"king",fontWeight:800},...r<t&&{cursor:"pointer",onClick:()=>i(r)},fontSize:{base:12,lg:13,"2xl":16},children:["0",r+1,". ",e]})},r))}),n.jsx(s.xu,{bg:"gray.300",rounded:"full",h:2,mt:{base:5,md:10},children:n.jsx(s.xu,{h:"full",transition:"width .4s",w:t==d.length-1?"full":`${100/d.length*(t+1)-50/d.length}%`,bg:"primary",rounded:"full"})})]}),n.jsx(s.xu,{w:"full",bg:"king",py:"50px",children:(0,n.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",color:"white",alignItems:"center",flexDir:{base:"column",lg:"row"},children:[(0,n.jsxs)(l.x,{fontSize:30,fontWeight:700,children:["Offre ",u," ",r.label," ","custom"!=r.type&&"PAC"]}),(0,n.jsxs)(l.x,{fontSize:14,children:["Offre ",u,", r\xe9silliable \xe0 tout moment"]})]})})]})}var x=r(17577);let p=["Un contrat adapt\xe9 \xe0 vos besoins et un suivi sur-mesure de votre \xe9quipement.","Des interventions rapide avec notre couverture nationale","Des conseillers et techniciens experts \xe0 votre \xe9coute."];function h(){return n.jsx(i.k,{justifyContent:"space-between",mt:20,children:p.map((e,t)=>n.jsx(l.x,{maxW:"270px",fontSize:13,textAlign:"center",children:e},t))})}var m=r(19768);function g(e){let{...t}=e;return n.jsx(s.xu,{w:"full",h:"1px",bg:"gray.200",my:3,...t})}var f=r(84532),j=r(94782);function b(e){let{contractLabel:t,products:r,totalPrice:o}=e,a=(0,c.Gc)(),d=a.watch("payment-type")??"month",u=a.watch("adresse"),x=a.watch("date");return(0,n.jsxs)(s.xu,{w:"full",maxW:"370px",borderWidth:1,borderColor:"king",bg:"white",px:7,py:4,mt:{base:5,lg:0},color:"king",h:"fit-content",children:[n.jsx(l.x,{fontWeight:700,fontSize:20,children:"Votre panier"}),n.jsx(g,{}),(0,n.jsxs)(i.k,{justifyContent:"space-between",children:[n.jsx(l.x,{children:"Total"}),(0,n.jsxs)(s.xu,{textAlign:"right",children:[(0,n.jsxs)(l.x,{fontWeight:700,children:[(0,m.x)(o)," TTC/mois"]}),(0,n.jsxs)(l.x,{children:["Soit ",(0,m.x)(12*o)," TTC/an"]})]})]}),(0,n.jsxs)(i.k,{justifyContent:"space-between",mt:5,children:[n.jsx(l.x,{children:"TVA"}),n.jsx(l.x,{fontWeight:200,children:"5,5%"})]}),n.jsx(g,{}),(0,n.jsxs)(s.xu,{children:[(0,n.jsxs)(i.k,{justifyContent:"space-between",children:[(0,n.jsxs)(s.xu,{children:[n.jsx(l.x,{children:"Formule"}),n.jsx(l.x,{mb:2,children:t})]}),(0,n.jsxs)(s.xu,{textAlign:"right",fontSize:13,mt:1,children:[(0,n.jsxs)(l.x,{children:[(0,m.x)(o)," TTC/mois"]}),(0,n.jsxs)(l.x,{children:["Soit ",(0,m.x)(12*o)," TTC/an"]})]})]}),r.map(e=>(0,n.jsxs)(l.x,{fontSize:13,noOfLines:1,children:["- ",e.name]},e.id))]}),(0,n.jsxs)(i.k,{bg:"secondary",px:3,py:2,justifyContent:"space-between",my:5,color:"white",fontWeight:600,alignItems:"center",children:[n.jsx(l.x,{fontSize:18,children:"TOTAL CONTRAT"}),(0,n.jsxs)(l.x,{fontSize:13,children:[(0,m.x)(o*("month"==d?1:12))," TTC/","month"==d?"mois":"an"]})]}),u&&x&&(0,n.jsxs)(s.xu,{bg:"secondaryLight",rounded:"md",px:7,py:4,children:[n.jsx(l.x,{children:"Votre rendez-vous temporaire"}),n.jsx(l.x,{mt:5,fontWeight:700,children:function({address:e,city:t,zipCode:r,address2:n}){return`${e}${n?` ${n}`:""}, ${r} ${t}`}(u)}),n.jsx(l.x,{mt:3,fontWeight:700,textTransform:"capitalize",children:(0,f.p6)(new Date(x.split("|")[0]),"EEEE dd MMMM yyyy",{locale:j.fr})}),n.jsx(l.x,{mt:3,fontWeight:700,children:x.split("|")[1]})]})]})}var y=r(62841),v=r(38875),w=r(72234),C=r(76647),S=r(86364),k=r(47952),q=r(56285),z=r(78339),W=r(14615),E=r(82609),P=r(36612);function A(e){let{children:t,label:r}=e;return(0,n.jsxs)(s.xu,{children:[r&&n.jsx(P.l,{fontSize:13,color:"king",fontWeight:600,children:r}),t]})}let M=(0,x.forwardRef)(({label:e,options:t,isRequired:r,name:s},i)=>{let o=(0,E.qk)(s),{watch:a,setValue:d}=(0,c.Gc)(),[u,p]=(0,x.useState)(a(s)||"");return n.jsx(q.NI,{isInvalid:!!o,isRequired:r,ref:i,children:(0,n.jsxs)(A,{label:e,children:[n.jsx(y.U,{spacing:4,align:"stretch",children:t.map(e=>n.jsx(z.M,{onClick:()=>(function(e){p(e),d(s,e)})(e.id),p:4,borderWidth:"2px",borderRadius:"md",borderColor:u===e.id?"secondary":"gray.200",bg:"white",flex:1,maxW:"180px",cursor:"pointer",children:n.jsx(l.x,{textAlign:"center",color:"king",children:e.title})},e.id))}),o&&n.jsx(W.J1,{children:o.message})]})})});M.displayName="MaintenanceSelect";var R=r(34677),T=r(6331),_=r(61907),D=r(24756),I=r(42163),U=r(92977),$=r(32067),L=r(10569);let F=(0,x.forwardRef)(({isRequired:e,name:t},r)=>{let o=(0,E.qk)(t),{watch:a,setValue:d}=(0,c.Gc)(),[u,p]=(0,x.useState)(a(t)||""),h=(0,x.useMemo)(()=>V(),[]);return(0,n.jsxs)(q.NI,{isInvalid:!!o,isRequired:e,ref:r,children:[n.jsx(s.xu,{borderWidth:"1px",borderRadius:"md",overflow:"hidden",overflowX:"auto",maxW:{base:"270px",sm:"full"},mx:{base:"auto"},children:n.jsx(i.k,{children:h.map(e=>{let r=(0,f.WU)(e.date,"yyyy-MM-dd");return(0,n.jsxs)(s.xu,{flex:"1",children:[(0,n.jsxs)(s.xu,{bg:"#9ce2fb",color:"king",p:2,textAlign:"center",children:[n.jsx(l.x,{children:(0,L.kC)((0,f.WU)(e.date,"EEEE",{locale:j.fr}))}),n.jsx(l.x,{fontSize:{base:"11px",sm:"sm"},children:(0,L.kC)((0,f.WU)(e.date,"dd MMM",{locale:j.fr}))})]}),n.jsx(i.k,{flexDirection:"column",p:2,children:e.timeslots.map(e=>{let i=`${r}|${e}`;return n.jsx(s.xu,{onClick:()=>(function(e){p(e),d(t,e)})(i),py:1,my:1,mx:"auto",textAlign:"center",borderWidth:2,borderRadius:"md",w:"70px",borderColor:u===i?_.O.secondary:"gray.200",cursor:"pointer",fontSize:13,children:e},e)})})]},e.date.toISOString())})})}),o&&n.jsx(W.J1,{children:o.message})]})}),V=()=>{let e=new Date,t=(0,D.$)((0,I.z)(e,2)),r=(0,U.E)(t,4);return(0,$.D)({start:t,end:r}).map(e=>({date:e,timeslots:["8h - 12h","14h - 18h"]}))};var O=r(6550),G=r(10119),J=r(44976),N=r(35047),Z=r(76),X=r(32873),B=r(42019),K=r(89992),H=r(90434);let Q=(0,x.forwardRef)((e,t)=>{let{products:r,onSubmit:i,type:o}=e,{watch:a,setValue:d,getValues:u}=(0,c.Gc)(),{mutate:p,isPending:h}=(0,G.useMutation)({mutationFn:async e=>{let t=await (0,Z.ET)((0,Z.hJ)(O.db,"maintenance_contracts"),{...e,status:"pending",createdAt:new Date});return{recipientViewUrl:`${window.location.origin}/contracts/${t.id}/view`,docUrl:`${window.location.origin}/contracts/${t.id}/document`,envelopeId:t.id}}}),[m,g]=(0,x.useState)(""),f=a("unsignedDocUrl"),j=a("recipientViewUrl"),b=u("contractCheckbox1"),y=u("contractCheckbox2");return(0,n.jsxs)(s.xu,{position:"relative",children:[h&&n.jsx(B.$,{position:"absolute",left:"calc(50% - 50px)",top:10,boxSize:"100px",color:"primary"}),(0,n.jsxs)(s.xu,{visibility:j&&f&&!h?"visible":"hidden",children:[!m&&(0,n.jsxs)(z.M,{flexDir:"column",bg:"#9ce2fb",p:5,color:"king",fontSize:18,rounded:"md",children:[n.jsx(v.E,{src:"/icons/maison_securisee.png",h:"60px"}),n.jsx(l.x,{fontWeight:600,my:2,children:"Mon contrat d'entretien"}),n.jsx(w.g,{children:r.map(e=>n.jsx(l.x,{children:e.name},e.id))}),n.jsx(R.default,{my:5,h:"55px",href:f,target:"_blank",children:"Visualiser mon contrat"})]}),m?(0,n.jsxs)(n.Fragment,{children:[n.jsx(l.x,{fontSize:11,textAlign:"center",mt:10,children:'En cliquant sur "Proc\xe9der au paiement", je confirme ma souscription et m\'engage \xe0 r\xe9gler les factures correspondant au contrat'}),n.jsx(R.default,{h:"55px",mx:"auto",mt:10,isDisabled:!b||!y,onClick:()=>{localStorage.setItem("signedContract",""),i()},children:"Proc\xe9der au paiement"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w.g,{mt:10,align:"stretch",children:[n.jsx(K.X,{size:"lg",isChecked:b,onChange:e=>d("contractCheckbox1",e.currentTarget.checked),children:n.jsx(l.x,{ml:4,children:"J'ai pris connaissance de mon contrat et pi\xe8ces annexes ci-dessus"})}),n.jsx(K.X,{size:"lg",isChecked:y,onChange:e=>d("contractCheckbox2",e.currentTarget.checked),children:(0,n.jsxs)(l.x,{ml:4,children:["J'ai pris connaissance des"," ",n.jsx(l.x,{as:H.default,href:"/mentions-legales",color:"secondary",textDecorationLine:"underline",children:"conditions g\xe9n\xe9rales de vente et de leur(s) annexe(s)"})," "]})})]}),n.jsx(R.default,{h:"55px",mx:"auto",mt:10,isDisabled:!b||!y,href:j,target:"_blank",children:"Signer mon contrat"})]})]})]})});var Y=r(82077),ee=r(89244),et=r(70520),er=r(80413);let en=(0,ee.J)(er.t.STRIPE_KEY_TEST),es=(0,x.forwardRef)((e,t)=>{let{type:r,products:i}=e,o=(0,et.MD)(),a=(0,et.lq)(),d=(0,Y.p)(),{watch:u,register:p,getValues:h}=(0,c.Gc)(),{mutate:m}=(0,G.useMutation)({mutationFn:async e=>({subscriptionId:(await (0,Z.ET)((0,Z.hJ)(O.db,"subscriptions"),{...e,status:"pending",createdAt:new Date})).id,status:"pending"})}),{mutate:g}=function(){let e=(0,J.useQueryClient)();return(0,G.useMutation)({mutationFn:async e=>(await (0,Z.r7)((0,Z.JU)(O.db,"maintenance_contracts",e.envelopeId),{status:"signed",signedAt:new Date}),{docUrl:`${window.location.origin}/contracts/${e.envelopeId}/document`}),onSuccess(){e.invalidateQueries({queryKey:X.Wg.list()})}})}(),f=(0,N.useRouter)(),[j,b]=(0,x.useState)(!1),[y,v]=(0,x.useState)(!1),w=u("payment-type");async function C(){if(!o||!a)return;b(!0);let e=a.getElement(et.eu);if(!e)return b(!1),null;let t=h("email"),n=h("prenom")+" "+h("nom"),{error:s,paymentMethod:l}=await o.createPaymentMethod({type:"sepa_debit",sepa_debit:e,billing_details:{email:t,name:n}});if(s){d({title:"Erreur lors de la cr\xe9ation de la m\xe9thode de paiement",description:s.message,status:"error",position:"top",duration:4e3}),b(!1);return}let c=l.id;m({interval:w,contract:{productIds:i.map(e=>e.id),type:r},paymentMethodId:c,email:t},{async onSuccess(e){let{error:t}=await o.confirmSepaDebitPayment(e?.latest_invoice?.payment_intent?.client_secret,{payment_method:c});t?(d({title:"Impossible d'activer l'abonnement",description:t.message,status:"error",position:"top",duration:4e3}),b(!1)):g({envelopeId:h("envelopeId")},{onSuccess(){d({title:"Abonnement activ\xe9",description:"Vous allez \xeatre redirig\xe9 vers votre espace client",status:"success",position:"top",duration:4e3}),f.push("/app/mon-compte/mes-contrats")},onSettled(){b(!1)}})},onError(e){d({title:"Impossible de cr\xe9er l'abonnement",description:e.message,status:"error",position:"top",duration:4e3}),b(!1)}})}return(0,n.jsxs)(s.xu,{children:[n.jsx(M,{options:[{title:"Mensuel",id:"month"},{title:"Annuel",id:"year"}],...p("payment-type")}),w&&n.jsx(s.xu,{w:"full",bg:"gray.100",rounded:"md",px:7,py:2,mt:4,children:(0,n.jsxs)(l.x,{children:["Vous allez \xeatre pr\xe9lev\xe9 une fois par"," ","month"==w?"mois":"an","."," "]})}),n.jsx(l.x,{textAlign:"center",fontSize:25,fontWeight:600,my:7,children:"Pr\xe9l\xe8vement"}),n.jsx(s.xu,{borderWidth:2,borderColor:"gray.200",rounded:"md",py:3,px:2,children:n.jsx(et.eu,{onChange:e=>{v(e.complete)},options:{supportedCountries:["SEPA"],placeholderCountry:"FR",style:{base:{fontSize:"18px",":focus":{backgroundColor:"white"}}}}})}),n.jsx(l.x,{children:"IBAN de test : DE89370400440532013000"}),n.jsx(l.x,{my:10,children:"Paiement s\xe9curis\xe9 avec cryptage SSL"}),n.jsx(R.default,{onClick:()=>C(),mx:"auto",h:"55px",px:10,isLoading:j,isDisabled:!y||!w,children:"Valider"}),n.jsx(l.x,{mt:10,fontWeight:200,children:"En cliquant sur \xab Payer \xbb, vous autorisez Label Energie \xe0 envoyer des instructions \xe0 votre banque pour d\xe9biter votre compte, et votre banque \xe0 d\xe9biter votre compte conform\xe9ment aux instructions de Label Energie. Vous b\xe9n\xe9ficiez du droit d’\xeatre rembours\xe9 par votre banque selon les conditions d\xe9crites dans la convention que vous avez pass\xe9e avec elle. Une demande de remboursement doit \xeatre pr\xe9sent\xe9e dans les 8 semaines suivant la date de d\xe9bit de votre compte pour un pr\xe9l\xe8vement autoris\xe9"})]})});function ei(e){let{onNext:t,currentTree:{items:r,title:s,subtitle:i,hideButton:o},products:a,contractType:d,onPrevious:u}=e,p=(0,c.Gc)(),h=(0,x.useMemo)(()=>{let e=r.filter(e=>!e.notRequired).map(e=>e.id),t=p.getValues(),n=!1;return e.forEach(e=>{if(!t[e]){n=!0;return}}),n},[p.watch(),r]);return(0,n.jsxs)(C.Z,{w:"full",maxW:"570px",mr:{lg:5},p:{base:3,md:7},h:"fit-content",position:"relative",children:[u&&(0,n.jsxs)(y.U,{cursor:"pointer",onClick:u,position:{md:"absolute"},top:4,left:4,children:[n.jsx(v.E,{src:"/icons/caret.svg",h:"25px"}),n.jsx(l.x,{color:"primary",fontWeight:600,children:"Retour"})]}),n.jsx(l.x,{textAlign:"center",fontWeight:600,fontSize:18,children:s}),n.jsx(S.Z,{zoom:!1,mt:3,mb:7}),i&&n.jsx(l.x,{mb:7,textAlign:"center",fontSize:13,children:i}),n.jsx(w.g,{spacing:5,align:"stretch",children:r.map(({id:e,type:r,placeholder:s,title:i,values:o})=>(0,n.jsxs)(x.Fragment,{children:["input"==r&&n.jsx(A,{label:i,children:n.jsx(k.I,{label:s,...p.register(e)})}),"select"==r&&n.jsx(M,{options:o??[],label:i,...p.register(e)}),"input-address"==r&&n.jsx(A,{label:i,children:n.jsx(T.r,{...p.register(e)})}),"input-date"==r&&n.jsx(F,{...p.register(e)}),"input-contract"==r&&n.jsx(Q,{products:a,onSubmit:t,type:d,...p.register(e)}),"input-payment"==r&&n.jsx(et.eK,{stripe:en,children:n.jsx(es,{products:a,type:d,...p.register(e)})})]},e))}),!o&&n.jsx(R.default,{h:"55px",mx:"auto",mt:10,isDisabled:h,onClick:()=>t(p.getValues()),children:"Continuer"})]})}var eo=r(53980),el=r(66953);let ea=(0,x.forwardRef)((e,t)=>{let{}=e,{isOpen:r,onOpen:o,onClose:a}=(0,el.q)();return(0,x.useImperativeHandle)(t,()=>({onOpen:()=>{o()}})),n.jsx(eo.Z,{isOpen:r,onClose:a,size:"3xl",children:(0,n.jsxs)(w.g,{flexDir:{base:"column",lg:"row"},spacing:8,overflowX:"hidden",children:[n.jsx(s.xu,{borderWidth:1,borderRadius:"lg",w:"50%",children:(0,n.jsxs)(w.g,{align:"stretch",spacing:0,children:[n.jsx(l.x,{fontSize:"lg",fontWeight:"bold",textAlign:"center",bg:"secondaryLight",px:4,py:3,borderBottomWidth:1,children:"FORMULE LIBERT\xc9 PAC"}),n.jsx(l.x,{fontSize:"sm",fontWeight:"bold",px:4,py:3,textAlign:"center",borderBottomWidth:1,children:"14,90 €/mois soit 178,80 €/an"}),(0,n.jsxs)(w.g,{px:4,py:2,align:"stretch",children:[(0,n.jsxs)(y.U,{spacing:5,children:[n.jsx(S.Z,{zoom:!1,w:"20px",minW:"20px"}),n.jsx(l.x,{w:"full",children:"Visite d'entretien annuel"})]}),(0,n.jsxs)(i.k,{mt:2,children:[n.jsx(S.Z,{zoom:!1,w:"20px",minW:"20px",mt:"6px",mr:5}),n.jsx(l.x,{w:"full",verticalAlign:"top",children:"Lors du 1er d\xe9pannage b\xe9n\xe9ficiez de 20% de r\xe9duction sur les pi\xe8ces"})]})]})]})}),(0,n.jsxs)(s.xu,{w:"50%",children:[n.jsx(l.x,{fontSize:"2xl",fontWeight:"bold",children:"Changement de formule"}),n.jsx(l.x,{mt:5,children:'Compte tenu de l\'anciennet\xe9 de votre \xe9quipement, nous ne sommes pas en mesure de vous proposer la formule "S\xe9curit\xe9".'}),n.jsx(l.x,{my:3,children:"Nous vous sugg\xe9rons de poursuivre avec la Formule Libert\xe9, qui est la plus proche de la Formule S\xe9curit\xe9."}),(0,n.jsxs)(w.g,{spacing:4,w:"full",mt:5,children:[n.jsx(R.default,{w:"full",onClick:()=>{a()},fontSize:16,href:"/services/contrat-entretien?type=liberte",children:"Continuer avec la formule Libert\xe9"}),n.jsx(l.x,{as:H.default,href:"/services/entretien-maintenance#offres",onClick:a,fontWeight:600,children:"Choisir une autre formule"})]})]})]})})});var ec=r(27256),ed=r(86514),eu=r(4204);function ex(e){let{data:t,isLoading:r}=function(){let e=(0,N.useSearchParams)(),[t,r]=(0,x.useState)(),[n,s]=(0,x.useState)(!0);return(0,N.useRouter)(),(0,x.useMemo)(()=>e.get("type"),[e]),(0,x.useMemo)(()=>{let t=e.get("produits");return t?t.split(","):["1"]},[e]),{isLoading:n,data:t}}(),{data:o}=(0,eu.Pi)(),l=(0,x.useRef)(null),a=(0,N.useRouter)(),c=(0,E.w5)({schema:ec.z.any()}),[d,p]=(0,x.useState)(0),m=(0,x.useMemo)(()=>t?.tree[d],[t?.tree,d]);if(r||!t)return n.jsx(ed.Z,{minH:"80vh",children:"Chargement du formulaire..."});let{products:g,totalPrice:f,type:j}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(E.l0,{form:c,children:[n.jsx(u,{step:d,type:j,onChangeStep:p}),(0,n.jsxs)(s.xu,{position:"relative",py:10,px:5,children:[(0,n.jsxs)(i.k,{flexDir:{base:"column",lg:"row"},justifyContent:"center",alignItems:{base:"center",lg:"unset"},scrollMarginTop:"100px",id:"formulaire",children:[n.jsx(ei,{currentTree:m,onNext:function(e){let r=m.dependencies?.[t.type.type]??{},n="";if(Object.entries(r).forEach(([t,r])=>{if(e[t]==r.ifValue){n=r.type;return}}),"modal-change-type-to-liberte"===n){l.current?.onOpen();return}p(e=>e+1),a.push("#formulaire")},products:g,contractType:j.type,onPrevious:d>0&&6!=d?()=>{p(e=>e-1)}:void 0}),n.jsx(b,{contractLabel:j.label,products:g,totalPrice:f})]}),n.jsx(h,{})]})]}),n.jsx(ea,{ref:l})]})}},68779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(19510),s=r(68570);let i=(0,s.createProxy)(String.raw`C:\Users\Reunion2\Desktop\test-pay\front\src\components\MaintenanceContractForm\index.tsx`),{__esModule:o,$$typeof:l}=i;i.default;let a=(0,s.createProxy)(String.raw`C:\Users\Reunion2\Desktop\test-pay\front\src\components\MaintenanceContractForm\index.tsx#default`);async function c(){return n.jsx("main",{children:n.jsx(a,{})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[9351,2354],()=>r(1384));module.exports=n})();